@{
    ViewBag.Title = "Order";
}

@section Scripts{
    @Scripts.Render("~/bundles/sellerOrder")
}

<div ng-controller="sellerOrderCtrl" class="p-5">
    <h2 class="mb-3">Orders</h2>
        <div ng-repeat="order in orders" class="card mb-4">
            <div class="card-header">
                <span class="fw-bold">Order ID: </span>
                {{order.OrderId}}
            </div>
            <div class="card-body p-4">
                <div class="card-text d-flex justify-content-between mb-3">
                    <div class="fw-bold">Order Placed On</div>
                    <div>{{order.OrderDate}}</div>
                </div>
                <div ng-repeat="item in order.OrderItems" class="d-flex flex-column flex-sm-row justify-content-between mb-3">
                    <img ng-src="{{item.MovieImageUrl}}" width="200" />
                    <div class="d-flex">
                        <p class="card-text me-3">RM {{item.UnitPrice}}</p>
                        <p class="card-text">x {{item.Quantity}}</p>
                    </div>
                </div>
                <div class="card-text d-flex justify-content-between">
                    <p class="fw-bold my-auto">Total</p>
                    <p>RM {{order.Total}}</p>
                </div>
                <div class="card-text d-flex justify-content-between">
                    <p class="fw-bold my-auto">Status</p>
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="text-transform: capitalize;">
                            {{order.OrderStatus}}
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" ng-click="updateOrderStatus(order.OrderId,'pending')">Pending</a></li>
                            <li><a class="dropdown-item" ng-click="updateOrderStatus(order.OrderId,'shipping')">Shipping</a></li>
                            <li><a class="dropdown-item" ng-click="updateOrderStatus(order.OrderId,'delivered')">Delivered</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
</div>
